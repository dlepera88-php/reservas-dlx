function fecharPopupExterno(o){o.fadeOut("fast",function(){o.html(""),$(window).off(".__poupModal")})}function abrirPopupExterno(o,r,e,a){$.get(r,e,function(r){o.html(r).show(),$(window).on("keyup.__poupModal",function(r){27===(r.keycode||r.which)&&fecharPopupExterno(o)}),"function"==typeof a&&a.apply()},"html")}function excluirQuarto(o){confirm("Deseja realmente excluir esse quarto?")&&$.ajax({url:"/painel-dlx/apart-hotel/quartos/excluir",data:{id:o},type:"post",dataType:"json",mensagem:"Excluindo quarto.<br>Por favor aguarde...",success:function(o,r,e){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,e.id),void(window.location="/painel-dlx/apart-hotel/quartos");msgUsuario.mostrar(o.mensagem,o.retorno,e.id)}})}function excluirMidiaQuarto(o){confirm("Deseja realmente excluir essa foto/vídeo?")&&$.ajax({url:"/painel-dlx/apart-hotel/quartos/excluir-midia",data:{arquivo:o},type:"post",dataType:"json",mensagem:"Excluindo mídia do quarto.<br>Por favor aguarde...",success:function(o,r,e){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,e.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,e.id)}})}function popupConfirmarReserva(o,r){abrirPopupExterno($("#popup-confirmar-reserva"),"/painel-dlx/apart-hotel/reservas/"+o+"-reserva",{id:r,"pg-mestra":"conteudo-master"},function(){$("#form-confirmar-reserva, #form-cancelar-reserva").formAjax({func_depois:function(o,r,e){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,e.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,e.id)}})})}function popupConfirmarPedido(o,r){abrirPopupExterno($("#popup-confirmar-pedido"),"/painel-dlx/apart-hotel/pedidos/"+o+"-pedido",{id:r,"pg-mestra":"conteudo-master"},function(){$("#form-confirmar-pedido, #form-cancelar-pedido").formAjax({func_depois:function(o,r,e){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,e.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,e.id)}})})}function popupUploadMidias(){abrirPopupExterno($("#popup-upload-midias"),"/painel-dlx/apart-hotel/quartos/upload-midias",{"pg-mestra":"conteudo-master"},function(){$("#form-upload").formAjax({func_depois:function(o,r,e){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,e.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,e.id)}})})}function mostrarCpfCompleto(o){$.get("/painel-dlx/apart-hotel/reservas/mostrar-cpf-completo",{id:o},function(o,r,e){"erro"!==o.retorno?(msgUsuario.mostrar("Exibindo CPF do cliente...","sucesso",e.id),$("#cpf-cliente").html(o.cpf),$("#btn-cpf-completo").remove()):msgUsuario.mostrar(o.mensagem,o.retorno,e.id)},"json")}function mostrarCpfCompletoPedido(o){$.get("/painel-dlx/apart-hotel/pedidos/mostrar-cpf-completo",{id:o},function(o,r,e){"erro"!==o.retorno?(msgUsuario.mostrar("Exibindo CPF do cliente...","sucesso",e.id),$("#cpf-cliente").html(o.cpf),$("#btn-cpf-completo").remove()):msgUsuario.mostrar(o.mensagem,o.retorno,e.id)},"json")}!function(o){o.fn.uploadPreview=function(){return this.each(function(){var r=o(this);return r.on("change.__uploadPreview",function(){for(var e,a=this.files.length,n=0;n<a;n++)(e=new FileReader).readAsDataURL(this.files[n]),e.onloadend=function(e){var a,n=o(document.createElement("div")).addClass("arquivo-preview"),i=(a=e.target.result,o(document.createElement("figure")).html('<img src="'+a+'" alt="">')),t=r.parents(".upload-arquivos").find(".upload-arquivos-preview");i.appendTo(n),n.appendTo(t)}}),r})}}(jQuery);