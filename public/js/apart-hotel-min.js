function fecharPopupExterno(o){o.fadeOut("fast",(function(){o.html(""),$(window).off(".__poupModal")}))}function abrirPopupExterno(o,e,r,a){$.get(e,r,(function(e){o.html(e).show(),$(window).on("keyup.__poupModal",(function(e){27===(e.keycode||e.which)&&fecharPopupExterno(o)})),"function"==typeof a&&a.apply()}),"html")}function excluirQuarto(o){confirm("Deseja realmente excluir esse quarto?")&&$.ajax({url:"/painel-dlx/apart-hotel/quartos/excluir",data:{id:o},type:"post",dataType:"json",mensagem:"Excluindo quarto.<br>Por favor aguarde...",success:function(o,e,r){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,r.id),void(window.location="/painel-dlx/apart-hotel/quartos");msgUsuario.mostrar(o.mensagem,o.retorno,r.id)}})}function excluirMidiaQuarto(o){confirm("Deseja realmente excluir essa foto/vídeo?")&&$.ajax({url:"/painel-dlx/apart-hotel/quartos/excluir-midia",data:{arquivo:o},type:"post",dataType:"json",mensagem:"Excluindo mídia do quarto.<br>Por favor aguarde...",success:function(o,e,r){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,r.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,r.id)}})}function popupConfirmarReserva(o,e){abrirPopupExterno($("#popup-confirmar-reserva"),"/painel-dlx/apart-hotel/reservas/"+o+"-reserva",{id:e,"pg-mestra":"conteudo-master"},(function(){$("#form-confirmar-reserva, #form-cancelar-reserva").formAjax({func_depois:function(o,e,r){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,r.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,r.id)}})}))}function popupConfirmarPedido(o,e){abrirPopupExterno($("#popup-confirmar-pedido"),"/painel-dlx/apart-hotel/pedidos/"+o+"-pedido",{id:e,"pg-mestra":"conteudo-master"},(function(){$("#form-confirmar-pedido, #form-cancelar-pedido").formAjax({func_depois:function(o,e,r){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,r.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,r.id)}})}))}function popupUploadMidias(){abrirPopupExterno($("#popup-upload-midias"),"/painel-dlx/apart-hotel/quartos/upload-midias",{"pg-mestra":"conteudo-master"},(function(){$("#form-upload").formAjax({func_depois:function(o,e,r){if("sucesso"===o.retorno)return msgUsuario.adicionar(o.mensagem,o.retorno,r.id),void window.location.reload();msgUsuario.mostrar(o.mensagem,o.retorno,r.id)}})}))}function popupDetalhamentoPeriodo(o){abrirPopupExterno($("#popup-detalhamento-periodo"),"/painel-dlx/apart-hotel/pedidos/detalhe/detalhamento-periodo",{pedido_item_id:o,"pg-mestra":"conteudo-master"})}function mostrarCpfCompleto(o){$.get("/painel-dlx/apart-hotel/reservas/mostrar-cpf-completo",{id:o},(function(o,e,r){"erro"!==o.retorno?(msgUsuario.mostrar("Exibindo CPF do cliente...","sucesso",r.id),$("#cpf-cliente").html(o.cpf),$("#btn-cpf-completo").remove()):msgUsuario.mostrar(o.mensagem,o.retorno,r.id)}),"json")}function mostrarCpfCompletoPedido(o){$.get("/painel-dlx/apart-hotel/pedidos/mostrar-cpf-completo",{id:o},(function(o,e,r){"erro"!==o.retorno?(msgUsuario.mostrar("Exibindo CPF do cliente...","sucesso",r.id),$("#cpf-cliente").html(o.cpf),$("#btn-cpf-completo").remove()):msgUsuario.mostrar(o.mensagem,o.retorno,r.id)}),"json")}!function(o){o.fn.uploadPreview=function(){return this.each((function(){var e=o(this);return e.on("change.__uploadPreview",(function(){for(var r,a=this.files.length,n=0;n<a;n++)(r=new FileReader).readAsDataURL(this.files[n]),r.onloadend=function(r){var a,n=o(document.createElement("div")).addClass("arquivo-preview"),i=(a=r.target.result,o(document.createElement("figure")).html('<img src="'+a+'" alt="">')),t=e.parents(".upload-arquivos").find(".upload-arquivos-preview");i.appendTo(n),n.appendTo(t)}})),e}))}}(jQuery);